<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: src/ffmpeg_compat.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">2.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">ffmpeg_compat.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>FFmpeg API compatibility.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ffmpeg__compat_8h__dep__incl.png" border="0" usemap="#asrc_2ffmpeg__compat_8hdep" alt=""/></div>
<map name="asrc_2ffmpeg__compat_8hdep" id="asrc_2ffmpeg__compat_8hdep">
<area shape="rect" title="FFmpeg API compatibility." alt="" coords="769,5,915,32"/>
<area shape="rect" href="ffmpeg__utils_8h.html" title="Various FFmpegfs utility functions." alt="" coords="779,80,905,107"/>
<area shape="rect" href="blurayio_8cc.html" title="BlurayIO class implementation." alt="" coords="221,229,327,256"/>
<area shape="rect" href="blurayparser_8cc.html" title="Blu&#45;ray disk parser implementation." alt="" coords="1960,304,2092,331"/>
<area shape="rect" href="buffer_8cc.html" title="Buffer class implementation." alt="" coords="352,229,447,256"/>
<area shape="rect" href="cache_8cc.html" title="Cache class implementation." alt="" coords="471,229,568,256"/>
<area shape="rect" href="cache__maintenance_8cc.html" title="Cache maintenance implementation" alt="" coords="593,229,771,256"/>
<area shape="rect" href="dvdio_8cc.html" title="DvdIO class implementation." alt="" coords="795,229,889,256"/>
<area shape="rect" href="dvdparser_8cc.html" title="dvdparser class implementation" alt="" coords="716,304,835,331"/>
<area shape="rect" href="ffmpeg__base_8h.html" title="FFmpeg transcoder base." alt="" coords="50,155,181,181"/>
<area shape="rect" href="ffmpeg__frame_8cc.html" title="FFmpeg_Frame class implementation." alt="" coords="771,155,913,181"/>
<area shape="rect" href="ffmpeg__profiles_8h.html" title="FFmpeg encoder profiles." alt="" coords="265,155,409,181"/>
<area shape="rect" href="ffmpeg__subtitle_8cc.html" title="FFmpeg_Subtitle class implementation." alt="" coords="989,155,1140,181"/>
<area shape="rect" href="ffmpeg__utils_8cc.html" title="FFmpegfs utility set implementation." alt="" coords="913,229,1046,256"/>
<area shape="rect" href="ffmpegfs_8cc.html" title="FFmpeg main function and utilities implementation." alt="" coords="1071,229,1184,256"/>
<area shape="rect" href="ffmpegfs_8h.html" title="Main include for FFmpegfs project." alt="" coords="1385,155,1491,181"/>
<area shape="rect" href="vcdparser_8cc.html" title="Video/Super Video CD parser implementation." alt="" coords="2460,304,2579,331"/>
<area shape="rect" href="vcdchapter_8cc.html" title="S/VCD VcdChapter class implementation." alt="" coords="2557,229,2708,256"/>
<area shape="rect" href="vcdutils_8cc.html" title="S/VCD utility functions implementation." alt="" coords="2732,229,2864,256"/>
<area shape="rect" href="ffmpeg__base_8cc.html" title="FFmpeg_Base class implementation." alt="" coords="859,304,996,331"/>
<area shape="rect" href="ffmpeg__transcoder_8h.html" title="FFmpeg transcoder." alt="" coords="34,229,197,256"/>
<area shape="rect" href="ffmpeg__profiles_8cc.html" title="Make audience audience specific optimisations." alt="" coords="40,304,191,331"/>
<area shape="rect" href="ffmpeg__transcoder_8cc.html" title="FFmpeg_Transcoder class implementation." alt="" coords="1020,304,1189,331"/>
<area shape="rect" href="transcode_8cc.html" title="File transcoder interface implementation." alt="" coords="1213,304,1332,331"/>
<area shape="rect" href="cache__entry_8cc.html" title="Cache_Entry class implementation." alt="" coords="1446,229,1577,256"/>
<area shape="rect" href="cuesheetparser_8cc.html" title="Cue sheet parser implementation." alt="" coords="1513,304,1664,331"/>
<area shape="rect" href="diskio_8cc.html" title="DiskIO class implementation." alt="" coords="1651,229,1747,256"/>
<area shape="rect" href="fileio_8cc.html" title="FileIO class implementation." alt="" coords="1772,229,1861,256"/>
<area shape="rect" href="logging_8cc.html" title="Log facilities implementation." alt="" coords="1885,229,1988,256"/>
<area shape="rect" href="transcode_8h.html" title="File transcoder interface (for use with by FUSE)" alt="" coords="1310,229,1422,256"/>
<area shape="rect" href="vcdentries_8cc.html" title="S/VCD VcdEntries class implementation." alt="" coords="2063,229,2210,256"/>
<area shape="rect" href="vcdinfo_8cc.html" title="S/VCD VcdInfo class implementation." alt="" coords="2235,229,2364,256"/>
<area shape="rect" href="vcdio_8cc.html" title="VcdIO class implementation." alt="" coords="2389,229,2482,256"/>
<area shape="rect" href="fuseops_8cc.html" title="Fuse operations implementation." alt="" coords="1356,304,1464,331"/>
</map>
</div>
</div>
<p><a href="ffmpeg__compat_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3857e6749b0b25b74f9429af2798f4a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ffmpeg__compat_8h.html#a3857e6749b0b25b74f9429af2798f4a5">LAVU_DEP_PKT_DURATION</a>&#160;&#160;&#160;(LIBAVUTIL_VERSION_INT &gt;= AV_VERSION_INT(57, 30, 0))</td></tr>
<tr class="separator:a3857e6749b0b25b74f9429af2798f4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f316a56dc8cae3fddabfa478c424f0a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ffmpeg__compat_8h.html#a2f316a56dc8cae3fddabfa478c424f0a">LAVC_DEP_AV_INIT_PACKET</a>&#160;&#160;&#160;(LIBAVCODEC_VERSION_INT &gt;= AV_VERSION_INT(58, 133, 0))</td></tr>
<tr class="separator:a2f316a56dc8cae3fddabfa478c424f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f9296f823825cb17205d59fd6dcb5d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ffmpeg__compat_8h.html#aa1f9296f823825cb17205d59fd6dcb5d">IF_DECLARED_CONST</a>&#160;&#160;&#160;(LIBAVCODEC_VERSION_INT &gt;= AV_VERSION_INT(59, 0, 0))</td></tr>
<tr class="separator:aa1f9296f823825cb17205d59fd6dcb5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea7ecac7e819ef6fb0cac5f19df9867"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ffmpeg__compat_8h.html#afea7ecac7e819ef6fb0cac5f19df9867">LAVU_DEP_OLD_CHANNEL_LAYOUT</a>&#160;&#160;&#160;(LIBAVUTIL_VERSION_INT &gt;= AV_VERSION_INT(57, 24, 0))</td></tr>
<tr class="separator:afea7ecac7e819ef6fb0cac5f19df9867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e86f07bdf5a2b364fda58881d8158c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ffmpeg__compat_8h.html#a50e86f07bdf5a2b364fda58881d8158c">SWR_DEP_ALLOC_SET_OPTS</a>&#160;&#160;&#160;(LIBSWRESAMPLE_VERSION_INT &gt;= AV_VERSION_INT(4, 5, 0))</td></tr>
<tr class="separator:a50e86f07bdf5a2b364fda58881d8158c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>FFmpeg API compatibility. </p>
<p>This file makes it possible to support FFmpeg 2.x to 4.</p>
<dl class="section author"><dt>Author</dt><dd>Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2017-2023 Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa1f9296f823825cb17205d59fd6dcb5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f9296f823825cb17205d59fd6dcb5d">&#9670;&nbsp;</a></span>IF_DECLARED_CONST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IF_DECLARED_CONST&#160;&#160;&#160;(LIBAVCODEC_VERSION_INT &gt;= AV_VERSION_INT(59, 0, 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is big fun... Of course making these const is a good idea, but nevertheless a PITA to keep the code working with newer AND older versions...</p>
<p>2021-04-27 - cb3ac722f4 - lavc 59.0.100 - avcodec.h Constified AVCodecParserContext.parser.</p>
<p>2021-04-27 - 8b3e6ce5f4 - lavd 59.0.100 - avdevice.h The av_*_device_next API functions now accept and return pointers to const AVInputFormat resp. AVOutputFormat.</p>
<p>2021-04-27 - d7e0d428fa - lavd 59.0.100 - avdevice.h avdevice_list_input_sources and avdevice_list_output_sinks now accept pointers to const AVInputFormat resp. const AVOutputFormat.</p>
<p>2021-04-27 - 46dac8cf3d - lavf 59.0.100 - avformat.h av_find_best_stream now uses a const AVCodec ** parameter for the returned decoder.</p>
<p>2021-04-27 - 626535f6a1 - lavc 59.0.100 - codec.h avcodec_find_encoder_by_name(), avcodec_find_encoder(), avcodec_find_decoder_by_name() and avcodec_find_decoder() now return a pointer to const AVCodec.</p>
<p>2021-04-27 - 14fa0a4efb - lavf 59.0.100 - avformat.h Constified AVFormatContext.*_codec.</p>
<p>2021-04-27 - 56450a0ee4 - lavf 59.0.100 - avformat.h Constified the pointers to AVInputFormats and AVOutputFormats in AVFormatContext, avformat_alloc_output_context2(), av_find_input_format(), av_probe_input_format(), av_probe_input_format2(), av_probe_input_format3(), av_probe_input_buffer2(), av_probe_input_buffer(), avformat_open_input(), av_guess_format() and av_guess_codec(). Furthermore, constified the AVProbeData in av_probe_input_format(), av_probe_input_format2() and av_probe_input_format3(). </p>

<p class="definition">Definition at line <a class="el" href="ffmpeg__compat_8h_source.html#l00117">117</a> of file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>

</div>
</div>
<a id="a2f316a56dc8cae3fddabfa478c424f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f316a56dc8cae3fddabfa478c424f0a">&#9670;&nbsp;</a></span>LAVC_DEP_AV_INIT_PACKET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAVC_DEP_AV_INIT_PACKET&#160;&#160;&#160;(LIBAVCODEC_VERSION_INT &gt;= AV_VERSION_INT(58, 133, 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>2021-03-17 - f7db77bd87 - lavc 58.133.100 - codec.h Deprecated av_init_packet(). Once removed, sizeof(AVPacket) will no longer be a part of the public ABI. Deprecated AVPacketList.</p>
<p>Note from libacodec/packet.h:</p>
<p>sizeof(AVPacket) being a part of the public ABI is deprecated. once av_init_packet() is removed, new packets will only be able to be allocated with av_packet_alloc(), and new fields may be added to the end of the struct with a minor bump.</p>
<p>see av_packet_alloc see av_packet_ref see av_packet_unref </p>

<p class="definition">Definition at line <a class="el" href="ffmpeg__compat_8h_source.html#l00079">79</a> of file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>

</div>
</div>
<a id="afea7ecac7e819ef6fb0cac5f19df9867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea7ecac7e819ef6fb0cac5f19df9867">&#9670;&nbsp;</a></span>LAVU_DEP_OLD_CHANNEL_LAYOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAVU_DEP_OLD_CHANNEL_LAYOUT&#160;&#160;&#160;(LIBAVUTIL_VERSION_INT &gt;= AV_VERSION_INT(57, 24, 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>2022-03-15 - cdba98bb80 - lavu 57.24.100 - channel_layout.h frame.h opt.h Add new channel layout API based on the AVChannelLayout struct. Add support for Ambisonic audio. Deprecate previous channel layout API based on uint64 bitmasks. </p>

<p class="definition">Definition at line <a class="el" href="ffmpeg__compat_8h_source.html#l00124">124</a> of file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>

</div>
</div>
<a id="a3857e6749b0b25b74f9429af2798f4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3857e6749b0b25b74f9429af2798f4a5">&#9670;&nbsp;</a></span>LAVU_DEP_PKT_DURATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAVU_DEP_PKT_DURATION&#160;&#160;&#160;(LIBAVUTIL_VERSION_INT &gt;= AV_VERSION_INT(57, 30, 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>FFmpeg compatibility layer: Maintain support for older versions while removing deprecated functions as needed.</p>
<p>See doc/APIchanges 2022-07-xx - xxxxxxxxxx - lavu 57.30.100 - frame.h Add AVFrame.duration, deprecate AVFrame.pkt_duration. </p>

<p class="definition">Definition at line <a class="el" href="ffmpeg__compat_8h_source.html#l00059">59</a> of file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>

</div>
</div>
<a id="a50e86f07bdf5a2b364fda58881d8158c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50e86f07bdf5a2b364fda58881d8158c">&#9670;&nbsp;</a></span>SWR_DEP_ALLOC_SET_OPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SWR_DEP_ALLOC_SET_OPTS&#160;&#160;&#160;(LIBSWRESAMPLE_VERSION_INT &gt;= AV_VERSION_INT(4, 5, 0))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>2022-03-15 - cdba98bb80 - swr 4.5.100 - swresample.h Add swr_alloc_set_opts2() and swr_build_matrix2(). Deprecate swr_alloc_set_opts() and swr_build_matrix(). </p>

<p class="definition">Definition at line <a class="el" href="ffmpeg__compat_8h_source.html#l00130">130</a> of file <a class="el" href="ffmpeg__compat_8h_source.html">ffmpeg_compat.h</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
