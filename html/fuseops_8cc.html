<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: src/fuseops.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem
   &#160;<span id="projectnumber">1.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fuseops.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Fuse operations implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="transcode_8h_source.html">transcode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ffmpeg__utils_8h_source.html">ffmpeg_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cache__maintenance_8h_source.html">cache_maintenance.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="logging_8h_source.html">logging.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vcdparser_8h_source.html">vcdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dvdparser_8h_source.html">dvdparser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="blurayparser_8h_source.html">blurayparser.h</a>&quot;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;regex&gt;</code><br />
<code>#include &lt;list&gt;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fuseops.cc:</div>
<div class="dyncontent">
<div class="center"><img src="fuseops_8cc__incl.png" border="0" usemap="#src_2fuseops_8cc" alt=""/></div>
<map name="src_2fuseops_8cc" id="src_2fuseops_8cc">
<area shape="rect" id="node2" href="transcode_8h.html" title="File transcoder interface (for use with by FUSE) " alt="" coords="191,80,281,107"/>
<area shape="rect" id="node6" href="ffmpeg__utils_8h.html" title="Various FFmpegfs utility functions. " alt="" coords="339,229,443,256"/>
<area shape="rect" id="node14" href="cache__maintenance_8h.html" title="Cache maintenance " alt="" coords="748,80,897,107"/>
<area shape="rect" id="node16" href="logging_8h.html" title="Provide various log facilities to stderr, disk or syslog. " alt="" coords="972,80,1047,107"/>
<area shape="rect" id="node21" href="vcdparser_8h.html" title="Video CD and Super Video CD parser. " alt="" coords="1121,80,1212,107"/>
<area shape="rect" id="node22" href="dvdparser_8h.html" title="DVD parser. " alt="" coords="595,229,685,256"/>
<area shape="rect" id="node23" href="blurayparser_8h.html" title="Bluray disk parser. " alt="" coords="467,229,571,256"/>
<area shape="rect" id="node3" href="ffmpegfs_8h.html" title="Main include for FFmpegfs project. " alt="" coords="194,155,278,181"/>
<area shape="rect" id="node12" href="fileio_8h.html" title="FileIO class. " alt="" coords="78,229,138,256"/>
<area shape="rect" id="node7" href="ffmpeg__compat_8h.html" title="FFmpeg API compatibility. " alt="" coords="109,304,232,331"/>
</map>
</div>
</div>
<p><a href="fuseops_8cc_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a48dd1b588b6080267a2c6d4c602699d2"><td class="memItemLeft" align="right" valign="top"><a id="a48dd1b588b6080267a2c6d4c602699d2"></a>
typedef std::map&lt; std::string, <a class="el" href="structVIRTUALFILE.html">VIRTUALFILE</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a48dd1b588b6080267a2c6d4c602699d2">filenamemap</a></td></tr>
<tr class="memdesc:a48dd1b588b6080267a2c6d4c602699d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map source file names to virtual file objects. <br /></td></tr>
<tr class="separator:a48dd1b588b6080267a2c6d4c602699d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a797eca2f2b7c397c048baa73b939c01e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a797eca2f2b7c397c048baa73b939c01e">init_stat</a> (struct stat *st, size_t size, bool directory)</td></tr>
<tr class="memdesc:a797eca2f2b7c397c048baa73b939c01e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a stat structure.  <a href="#a797eca2f2b7c397c048baa73b939c01e">More...</a><br /></td></tr>
<tr class="separator:a797eca2f2b7c397c048baa73b939c01e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac260bddf3d7e55d8b9b396251e6519d6"><td class="memItemLeft" align="right" valign="top"><a id="ac260bddf3d7e55d8b9b396251e6519d6"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#ac260bddf3d7e55d8b9b396251e6519d6">prepare_script</a> ()</td></tr>
<tr class="memdesc:ac260bddf3d7e55d8b9b396251e6519d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the virtual script file into memory and store in buffer. <br /></td></tr>
<tr class="separator:ac260bddf3d7e55d8b9b396251e6519d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66c48999dc2161a69398c5e44c777792"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a66c48999dc2161a69398c5e44c777792">translate_path</a> (std::string *origpath, const char *path)</td></tr>
<tr class="memdesc:a66c48999dc2161a69398c5e44c777792"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate file names from FUSE to the original absolute path.  <a href="#a66c48999dc2161a69398c5e44c777792">More...</a><br /></td></tr>
<tr class="separator:a66c48999dc2161a69398c5e44c777792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acba2f69b5cad51dfdad024c9efccb684"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#acba2f69b5cad51dfdad024c9efccb684">transcoded_name</a> (std::string *filepath, <a class="el" href="classFFmpegfs__Format.html">FFmpegfs_Format</a> **current_format)</td></tr>
<tr class="memdesc:acba2f69b5cad51dfdad024c9efccb684"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert file name from source to destination name.  <a href="#acba2f69b5cad51dfdad024c9efccb684">More...</a><br /></td></tr>
<tr class="separator:acba2f69b5cad51dfdad024c9efccb684"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1057742433528c8fbe84339f316becbe"><td class="memItemLeft" align="right" valign="top">static filenamemap::const_iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a1057742433528c8fbe84339f316becbe">find_prefix</a> (const <a class="el" href="fuseops_8cc.html#a48dd1b588b6080267a2c6d4c602699d2">filenamemap</a> &amp;map, const std::string &amp;search_for)</td></tr>
<tr class="memdesc:a1057742433528c8fbe84339f316becbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find mapped file by prefix. Normally used to find a path.  <a href="#a1057742433528c8fbe84339f316becbe">More...</a><br /></td></tr>
<tr class="separator:a1057742433528c8fbe84339f316becbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62555502b0803b643078ab86ba4202e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aa62555502b0803b643078ab86ba4202e">ffmpegfs_readlink</a> (const char *path, char *buf, size_t size)</td></tr>
<tr class="memdesc:aa62555502b0803b643078ab86ba4202e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the target of a symbolic link.  <a href="#aa62555502b0803b643078ab86ba4202e">More...</a><br /></td></tr>
<tr class="separator:aa62555502b0803b643078ab86ba4202e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0c07bc6805650f5da69fc23258cc51"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a6c0c07bc6805650f5da69fc23258cc51">ffmpegfs_readdir</a> (const char *path, void *buf, fuse_fill_dir_t filler, off_t, struct fuse_file_info *)</td></tr>
<tr class="memdesc:a6c0c07bc6805650f5da69fc23258cc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read directory.  <a href="#a6c0c07bc6805650f5da69fc23258cc51">More...</a><br /></td></tr>
<tr class="separator:a6c0c07bc6805650f5da69fc23258cc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823061cda8036c46d185b5edd62bf770"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a823061cda8036c46d185b5edd62bf770">ffmpegfs_getattr</a> (const char *path, struct stat *stbuf)</td></tr>
<tr class="memdesc:a823061cda8036c46d185b5edd62bf770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file attributes.  <a href="#a823061cda8036c46d185b5edd62bf770">More...</a><br /></td></tr>
<tr class="separator:a823061cda8036c46d185b5edd62bf770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1000cf42094a79b839894b46f5fc4c7b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a1000cf42094a79b839894b46f5fc4c7b">ffmpegfs_fgetattr</a> (const char *path, struct stat *stbuf, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a1000cf42094a79b839894b46f5fc4c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get attributes from an open file.  <a href="#a1000cf42094a79b839894b46f5fc4c7b">More...</a><br /></td></tr>
<tr class="separator:a1000cf42094a79b839894b46f5fc4c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a7cfbbef8bf8b2532fc79e42376cb6450">ffmpegfs_open</a> (const char *path, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="mdescLeft">&#160;</td><td class="mdescRight">File open operation.  <a href="#a7cfbbef8bf8b2532fc79e42376cb6450">More...</a><br /></td></tr>
<tr class="separator:a7cfbbef8bf8b2532fc79e42376cb6450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a7a107ffbd11b97f3e06d7b3c32508"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a39a7a107ffbd11b97f3e06d7b3c32508">ffmpegfs_read</a> (const char *path, char *buf, size_t size, off_t _offset, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a39a7a107ffbd11b97f3e06d7b3c32508"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from an open file.  <a href="#a39a7a107ffbd11b97f3e06d7b3c32508">More...</a><br /></td></tr>
<tr class="separator:a39a7a107ffbd11b97f3e06d7b3c32508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea4779d4bb43472f16f47d7376a6e40"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aaea4779d4bb43472f16f47d7376a6e40">ffmpegfs_statfs</a> (const char *path, struct statvfs *stbuf)</td></tr>
<tr class="memdesc:aaea4779d4bb43472f16f47d7376a6e40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get file system statistics.  <a href="#aaea4779d4bb43472f16f47d7376a6e40">More...</a><br /></td></tr>
<tr class="separator:aaea4779d4bb43472f16f47d7376a6e40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6a5a4b01296278169ca568d5875cf8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a3b6a5a4b01296278169ca568d5875cf8">ffmpegfs_release</a> (const char *path, struct fuse_file_info *fi)</td></tr>
<tr class="memdesc:a3b6a5a4b01296278169ca568d5875cf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release an open file.  <a href="#a3b6a5a4b01296278169ca568d5875cf8">More...</a><br /></td></tr>
<tr class="separator:a3b6a5a4b01296278169ca568d5875cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a8c3b11e8f6bdd36ec82e5332c667ea7b">sighandler</a> (int signum)</td></tr>
<tr class="memdesc:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replacement SIGINT handler.  <a href="#a8c3b11e8f6bdd36ec82e5332c667ea7b">More...</a><br /></td></tr>
<tr class="separator:a8c3b11e8f6bdd36ec82e5332c667ea7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aa7d57eecd770c51ee5af839fe0c0f88f">ffmpegfs_init</a> (struct fuse_conn_info *conn)</td></tr>
<tr class="memdesc:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise filesystem.  <a href="#aa7d57eecd770c51ee5af839fe0c0f88f">More...</a><br /></td></tr>
<tr class="separator:aa7d57eecd770c51ee5af839fe0c0f88f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f5abb75c59040d697f629d27a7eee8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a95f5abb75c59040d697f629d27a7eee8">ffmpegfs_destroy</a> (__attribute__((unused)) void *p)</td></tr>
<tr class="memdesc:a95f5abb75c59040d697f629d27a7eee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up filesystem.  <a href="#a95f5abb75c59040d697f629d27a7eee8">More...</a><br /></td></tr>
<tr class="separator:a95f5abb75c59040d697f629d27a7eee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memItemLeft" align="right" valign="top"><a id="a98fc6202ddd48ca1ad9db1b96baf9d63"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a98fc6202ddd48ca1ad9db1b96baf9d63">init_fuse_ops</a> (void)</td></tr>
<tr class="memdesc:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise FUSE operation structure. <br /></td></tr>
<tr class="separator:a98fc6202ddd48ca1ad9db1b96baf9d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a412324a307b7979f30f64c5871796cf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a412324a307b7979f30f64c5871796cf2">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfilepath, const struct stat *st)</td></tr>
<tr class="memdesc:a412324a307b7979f30f64c5871796cf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list.  <a href="#a412324a307b7979f30f64c5871796cf2">More...</a><br /></td></tr>
<tr class="separator:a412324a307b7979f30f64c5871796cf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a865cdd6018a62aacf09564743e670270"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a865cdd6018a62aacf09564743e670270">insert_file</a> (<a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a> type, const std::string &amp;virtfilepath, const std::string &amp;origfile, const struct stat *st)</td></tr>
<tr class="memdesc:a865cdd6018a62aacf09564743e670270"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new virtual file to internal list.  <a href="#a865cdd6018a62aacf09564743e670270">More...</a><br /></td></tr>
<tr class="separator:a865cdd6018a62aacf09564743e670270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf06e1e660878226dfa1a1b24b626875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#acf06e1e660878226dfa1a1b24b626875">find_file</a> (const std::string &amp;virtfilepath)</td></tr>
<tr class="memdesc:acf06e1e660878226dfa1a1b24b626875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find file in cache.  <a href="#acf06e1e660878226dfa1a1b24b626875">More...</a><br /></td></tr>
<tr class="separator:acf06e1e660878226dfa1a1b24b626875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aaccd4c147efa346efcbb3c4fbb1e0a1a">check_path</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash.  <a href="#aaccd4c147efa346efcbb3c4fbb1e0a1a">More...</a><br /></td></tr>
<tr class="separator:aaccd4c147efa346efcbb3c4fbb1e0a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a757570119497576827529b07c0aa4147"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a757570119497576827529b07c0aa4147">load_path</a> (const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler)</td></tr>
<tr class="memdesc:a757570119497576827529b07c0aa4147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a path with virtual files for FUSE.  <a href="#a757570119497576827529b07c0aa4147">More...</a><br /></td></tr>
<tr class="separator:a757570119497576827529b07c0aa4147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc827aaac91b424b6e12207a0d4d828"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a6cc827aaac91b424b6e12207a0d4d828">selector</a> (const struct dirent *de)</td></tr>
<tr class="memdesc:a6cc827aaac91b424b6e12207a0d4d828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter function used for scandir.  <a href="#a6cc827aaac91b424b6e12207a0d4d828">More...</a><br /></td></tr>
<tr class="separator:a6cc827aaac91b424b6e12207a0d4d828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a7ad0a9782c3231049be5c9c9b22542a7">find_original</a> (std::string *filepath)</td></tr>
<tr class="memdesc:a7ad0a9782c3231049be5c9c9b22542a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the destination (post-transcode) file name, determine the name of the original file to be transcoded.  <a href="#a7ad0a9782c3231049be5c9c9b22542a7">More...</a><br /></td></tr>
<tr class="separator:a7ad0a9782c3231049be5c9c9b22542a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aed1aba02bbcd7a769c3a7d886061925f"><td class="memItemLeft" align="right" valign="top"><a id="aed1aba02bbcd7a769c3a7d886061925f"></a>
static <a class="el" href="fuseops_8cc.html#a48dd1b588b6080267a2c6d4c602699d2">filenamemap</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#aed1aba02bbcd7a769c3a7d886061925f">filenames</a></td></tr>
<tr class="memdesc:aed1aba02bbcd7a769c3a7d886061925f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map files to virtual files. <br /></td></tr>
<tr class="separator:aed1aba02bbcd7a769c3a7d886061925f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411fdba36f1bcd9e683ecaf42fafb9b2"><td class="memItemLeft" align="right" valign="top"><a id="a411fdba36f1bcd9e683ecaf42fafb9b2"></a>
static std::vector&lt; char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a411fdba36f1bcd9e683ecaf42fafb9b2">index_buffer</a></td></tr>
<tr class="memdesc:a411fdba36f1bcd9e683ecaf42fafb9b2"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classBuffer.html" title="The Buffer class. ">Buffer</a> for the virtual script if enabled. <br /></td></tr>
<tr class="separator:a411fdba36f1bcd9e683ecaf42fafb9b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751f2746b37ca950207ec5d4f904adf8"><td class="memItemLeft" align="right" valign="top"><a id="a751f2746b37ca950207ec5d4f904adf8"></a>
static struct sigaction&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a751f2746b37ca950207ec5d4f904adf8">oldHandler</a></td></tr>
<tr class="memdesc:a751f2746b37ca950207ec5d4f904adf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves old SIGINT handler to restore on shutdown. <br /></td></tr>
<tr class="separator:a751f2746b37ca950207ec5d4f904adf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20127960d0a961494a0a56d119d885a9"><td class="memItemLeft" align="right" valign="top">fuse_operations&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a20127960d0a961494a0a56d119d885a9">ffmpegfs_ops</a></td></tr>
<tr class="memdesc:a20127960d0a961494a0a56d119d885a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">FUSE file system operations.  <a href="#a20127960d0a961494a0a56d119d885a9">More...</a><br /></td></tr>
<tr class="separator:a20127960d0a961494a0a56d119d885a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e6179f1064980bec863d36c8afe89c"><td class="memItemLeft" align="right" valign="top">static const std::list&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fuseops_8cc.html#a94e6179f1064980bec863d36c8afe89c">passthrough_map</a></td></tr>
<tr class="separator:a94e6179f1064980bec863d36c8afe89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Fuse operations implementation. </p>
<dl class="section author"><dt>Author</dt><dd>Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 2006-2008 David Collett <br />
Copyright (C) 2008-2013 K. Henriksson <br />
Copyright (C) 2017-2019 FFmpeg support by Norbert Schlia (<a href="#" onclick="location.href='mai'+'lto:'+'nsc'+'hl'+'ia@'+'ob'+'liv'+'io'+'n-s'+'of'+'twa'+'re'+'.de'; return false;">nschl<span style="display: none;">.nosp@m.</span>ia@o<span style="display: none;">.nosp@m.</span>blivi<span style="display: none;">.nosp@m.</span>on-s<span style="display: none;">.nosp@m.</span>oftwa<span style="display: none;">.nosp@m.</span>re.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>

<p class="definition">Definition in file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aaccd4c147efa346efcbb3c4fbb1e0a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaccd4c147efa346efcbb3c4fbb1e0a1a">&#9670;&nbsp;</a></span>check_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool check_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if path has already been parsed. Only useful if for DVD, Bluray or VCD where it is guaranteed that all files have been parsed whenever the directory is in the hash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path to parse. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if path was found; false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00422">422</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00373">find_prefix()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00498">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00531">check_dvd()</a>, and <a class="el" href="vcdparser_8cc_source.html#l00146">check_vcd()</a>.</p>

</div>
</div>
<a id="a95f5abb75c59040d697f629d27a7eee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f5abb75c59040d697f629d27a7eee8">&#9670;&nbsp;</a></span>ffmpegfs_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffmpegfs_destroy </td>
          <td>(</td>
          <td class="paramtype">__attribute__((unused)) void *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean up filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01297">1297</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00179">Logging::debug()</a>, <a class="el" href="logging_8h_source.html#l00202">Logging::info()</a>, <a class="el" href="cache__maintenance_8cc_source.html#l00339">stop_cache_maintenance()</a>, <a class="el" href="transcode_8cc_source.html#l00615">transcoder_exit()</a>, and <a class="el" href="transcode_8cc_source.html#l00207">transcoder_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a1000cf42094a79b839894b46f5fc4c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1000cf42094a79b839894b46f5fc4c7b">&#9670;&nbsp;</a></span>ffmpegfs_fgetattr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_fgetattr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get attributes from an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00876">876</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00248">Logging::error()</a>, <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00605">transcoder_buffer_watermark()</a>, <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00057">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00049">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00054">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00046">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>, <a class="el" href="fileio_8h_source.html#l00048">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00051">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a823061cda8036c46d185b5edd62bf770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a823061cda8036c46d185b5edd62bf770">&#9670;&nbsp;</a></span>ffmpegfs_getattr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_getattr </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>stbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get file attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Path of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td>- <a class="el" href="classBuffer.html" title="The Buffer class. ">Buffer</a> to store information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00711">711</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="blurayparser_8cc_source.html#l00498">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00531">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00146">check_vcd()</a>, <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="fileio_8h_source.html#l00079">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00080">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00076">VIRTUALFILE::m_type</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00248">remove_filename()</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00219">transcoder_cached_filesize()</a>, <a class="el" href="transcode_8cc_source.html#l00595">transcoder_delete()</a>, <a class="el" href="transcode_8cc_source.html#l00600">transcoder_get_size()</a>, <a class="el" href="transcode_8cc_source.html#l00311">transcoder_new()</a>, <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00057">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00049">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00054">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00046">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>, <a class="el" href="fileio_8h_source.html#l00048">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00051">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aa7d57eecd770c51ee5af839fe0c0f88f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d57eecd770c51ee5af839fe0c0f88f">&#9670;&nbsp;</a></span>ffmpegfs_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * ffmpegfs_init </td>
          <td>(</td>
          <td class="paramtype">struct fuse_conn_info *&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise filesystem. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01259">1259</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00202">Logging::info()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00118">FFMPEGFS_PARAMS::m_basepath</a>, <a class="el" href="ffmpegfs_8h_source.html#l00157">FFMPEGFS_PARAMS::m_cache_maintenance</a>, <a class="el" href="ffmpegfs_8h_source.html#l00139">FFMPEGFS_PARAMS::m_enablescript</a>, <a class="el" href="ffmpegfs_8h_source.html#l00119">FFMPEGFS_PARAMS::m_mountpath</a>, <a class="el" href="fuseops_8cc_source.html#l00082">oldHandler</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, <a class="el" href="fuseops_8cc_source.html#l00278">prepare_script()</a>, <a class="el" href="fuseops_8cc_source.html#l01238">sighandler()</a>, and <a class="el" href="cache__maintenance_8cc_source.html#l00327">start_cache_maintenance()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a7cfbbef8bf8b2532fc79e42376cb6450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cfbbef8bf8b2532fc79e42376cb6450">&#9670;&nbsp;</a></span>ffmpegfs_open()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File open operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00980">980</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="fileio_8h_source.html#l00076">VIRTUALFILE::m_type</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00311">transcoder_new()</a>, <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00057">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00049">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00054">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00046">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>, <a class="el" href="fileio_8h_source.html#l00048">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00051">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a39a7a107ffbd11b97f3e06d7b3c32508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a7a107ffbd11b97f3e06d7b3c32508">&#9670;&nbsp;</a></span>ffmpegfs_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_offset</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01069">1069</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00248">Logging::error()</a>, <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="transcode_8cc_source.html#l00487">transcoder_read()</a>, <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00057">VIRTUALTYPE_BLURAY</a>, <a class="el" href="fileio_8h_source.html#l00049">VIRTUALTYPE_BUFFER</a>, <a class="el" href="fileio_8h_source.html#l00054">VIRTUALTYPE_DVD</a>, <a class="el" href="fileio_8h_source.html#l00046">VIRTUALTYPE_PASSTHROUGH</a>, <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>, <a class="el" href="fileio_8h_source.html#l00048">VIRTUALTYPE_SCRIPT</a>, and <a class="el" href="fileio_8h_source.html#l00051">VIRTUALTYPE_VCD</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a6c0c07bc6805650f5da69fc23258cc51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0c07bc6805650f5da69fc23258cc51">&#9670;&nbsp;</a></span>ffmpegfs_readdir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_readdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Physical path to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00603">603</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00219">append_sep()</a>, <a class="el" href="blurayparser_8cc_source.html#l00498">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00531">check_dvd()</a>, <a class="el" href="vcdparser_8cc_source.html#l00146">check_vcd()</a>, <a class="el" href="fuseops_8cc_source.html#l00244">init_stat()</a>, <a class="el" href="fuseops_8cc_source.html#l00387">insert_file()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00139">FFMPEGFS_PARAMS::m_enablescript</a>, <a class="el" href="ffmpegfs_8h_source.html#l00140">FFMPEGFS_PARAMS::m_scriptfile</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="fuseops_8cc_source.html#l00338">transcoded_name()</a>, <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>, <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>, and <a class="el" href="fileio_8h_source.html#l00048">VIRTUALTYPE_SCRIPT</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aa62555502b0803b643078ab86ba4202e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa62555502b0803b643078ab86ba4202e">&#9670;&nbsp;</a></span>ffmpegfs_readlink()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_readlink </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the target of a symbolic link. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00567">567</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, <a class="el" href="fuseops_8cc_source.html#l00338">transcoded_name()</a>, and <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="a3b6a5a4b01296278169ca568d5875cf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6a5a4b01296278169ca568d5875cf8">&#9670;&nbsp;</a></span>ffmpegfs_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_release </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct fuse_file_info *&#160;</td>
          <td class="paramname"><em>fi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release an open file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fi</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01215">1215</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, and <a class="el" href="transcode_8cc_source.html#l00595">transcoder_delete()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="aaea4779d4bb43472f16f47d7376a6e40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea4779d4bb43472f16f47d7376a6e40">&#9670;&nbsp;</a></span>ffmpegfs_statfs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffmpegfs_statfs </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct statvfs *&#160;</td>
          <td class="paramname"><em>stbuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get file system statistics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stbuf</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns 0. On error, returns -errno. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01181">1181</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>, <a class="el" href="logging_8h_source.html#l00156">Logging::trace()</a>, and <a class="el" href="fuseops_8cc_source.html#l00325">translate_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00223">init_fuse_ops()</a>.</p>

</div>
</div>
<a id="acf06e1e660878226dfa1a1b24b626875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf06e1e660878226dfa1a1b24b626875">&#9670;&nbsp;</a></span>find_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find file in cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Virtual filename and path of file to find. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If found, returns <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object, if not found returns nullptr. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00409">409</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_filepath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ffmpegfs_8cc_source.html#l00161">FFMPEGFS_PARAMS::current_format()</a>, and <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>.</p>

</div>
</div>
<a id="a7ad0a9782c3231049be5c9c9b22542a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ad0a9782c3231049be5c9c9b22542a7">&#9670;&nbsp;</a></span>find_original()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> find_original </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>filepath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the destination (post-transcode) file name, determine the name of the original file to be transcoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">filepath</td><td>- Input the original file, output name of transcoded file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns contstant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00484">484</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00229">append_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01121">compare()</a>, <a class="el" href="logging_8h_source.html#l00248">Logging::error()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00290">find_ext()</a>, <a class="el" href="fuseops_8cc_source.html#l00409">find_file()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00199">FFmpegfs_Format::format_name()</a>, <a class="el" href="fuseops_8cc_source.html#l00387">insert_file()</a>, <a class="el" href="ffmpegfs_8h_source.html#l00125">FFMPEGFS_PARAMS::m_format</a>, <a class="el" href="fileio_8h_source.html#l00079">VIRTUALFILE::m_origfile</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00248">remove_filename()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00263">remove_path()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00310">replace_ext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_filepath()</a>, <a class="el" href="fuseops_8cc_source.html#l00472">selector()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00125">FFMPEGFS_PARAMS::smart_transcode()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01107">strcasecmp()</a>, and <a class="el" href="fileio_8h_source.html#l00047">VIRTUALTYPE_REGULAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00876">ffmpegfs_fgetattr()</a>, <a class="el" href="fuseops_8cc_source.html#l00711">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l00980">ffmpegfs_open()</a>, <a class="el" href="fuseops_8cc_source.html#l01069">ffmpegfs_read()</a>, <a class="el" href="fuseops_8cc_source.html#l00567">ffmpegfs_readlink()</a>, and <a class="el" href="fuseops_8cc_source.html#l01181">ffmpegfs_statfs()</a>.</p>

</div>
</div>
<a id="a1057742433528c8fbe84339f316becbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1057742433528c8fbe84339f316becbe">&#9670;&nbsp;</a></span>find_prefix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static filenamemap::const_iterator find_prefix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="fuseops_8cc.html#a48dd1b588b6080267a2c6d4c602699d2">filenamemap</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>search_for</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find mapped file by prefix. Normally used to find a path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">map</td><td>- File map with virtual files. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">search_for</td><td>- Prefix (path) to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If found, returns const_iterator to map entry. Returns map.end() if not found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00373">373</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00422">check_path()</a>.</p>

</div>
</div>
<a id="a797eca2f2b7c397c048baa73b939c01e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a797eca2f2b7c397c048baa73b939c01e">&#9670;&nbsp;</a></span>init_stat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void init_stat </td>
          <td>(</td>
          <td class="paramtype">struct stat *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>directory</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise a stat structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td>- struct stat to fill in. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>- size of the corresponding file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">directory</td><td>- If true, the structure is set up for a directory. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00244">244</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00603">ffmpegfs_readdir()</a>.</p>

</div>
</div>
<a id="a412324a307b7979f30f64c5871796cf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a412324a307b7979f30f64c5871796cf2">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. </p>
<p>For Bluray/DVD/VCD actually no physical input file exists, so virtual file and origfile are the same.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td>- stat buffer with file size, time etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00387">387</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00320">create_bluray_virtualfile()</a>, <a class="el" href="dvdparser_8cc_source.html#l00242">create_dvd_virtualfile()</a>, <a class="el" href="vcdparser_8cc_source.html#l00052">create_vcd_virtualfile()</a>, <a class="el" href="fuseops_8cc_source.html#l00603">ffmpegfs_readdir()</a>, and <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>.</p>

</div>
</div>
<a id="a865cdd6018a62aacf09564743e670270"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a865cdd6018a62aacf09564743e670270">&#9670;&nbsp;</a></span>insert_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fileio_8h.html#ae8356f209b2b74cc385a8d7551f1f27a">LPVIRTUALFILE</a> insert_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fileio_8h.html#a1199d38534b11312b0210e527499a805">VIRTUALTYPE</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>virtfilepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>origfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>st</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add new virtual file to internal list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>- Type of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">virtfilepath</td><td>- Name of virtual file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">origfile</td><td>- Original file name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td>- stat buffer with file size, time etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns constant pointer to <a class="el" href="structVIRTUALFILE.html" title="Virtual file definition. ">VIRTUALFILE</a> object of file, nullptr if not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00392">392</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpegfs_8cc_source.html#l00130">FFMPEGFS_PARAMS::guess_format_idx()</a>, <a class="el" href="fileio_8h_source.html#l00078">VIRTUALFILE::m_format_idx</a>, <a class="el" href="fileio_8h_source.html#l00079">VIRTUALFILE::m_origfile</a>, <a class="el" href="fileio_8h_source.html#l00080">VIRTUALFILE::m_st</a>, <a class="el" href="fileio_8h_source.html#l00076">VIRTUALFILE::m_type</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_filepath()</a>.</p>

</div>
</div>
<a id="a757570119497576827529b07c0aa4147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a757570119497576827529b07c0aa4147">&#9670;&nbsp;</a></span>load_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_path </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct stat *&#160;</td>
          <td class="paramname"><em>statbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fuse_fill_dir_t&#160;</td>
          <td class="paramname"><em>filler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a path with virtual files for FUSE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Physical path to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">statbuf</td><td>- stat buffer to load. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>- FUSE buffer to fill. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filler</td><td>- Filler function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns number of files found. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00429">429</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00345">get_destname()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l00263">remove_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="blurayparser_8cc_source.html#l00498">check_bluray()</a>, <a class="el" href="dvdparser_8cc_source.html#l00531">check_dvd()</a>, and <a class="el" href="vcdparser_8cc_source.html#l00146">check_vcd()</a>.</p>

</div>
</div>
<a id="a6cc827aaac91b424b6e12207a0d4d828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc827aaac91b424b6e12207a0d4d828">&#9670;&nbsp;</a></span>selector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int selector </td>
          <td>(</td>
          <td class="paramtype">const struct dirent *&#160;</td>
          <td class="paramname"><em>de</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filter function used for scandir. </p>
<p>Selects files that can be processed with FFmpeg API.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">de</td><td>- dirent to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns nonzero if dirent matches, 0 if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00472">472</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00484">find_original()</a>.</p>

</div>
</div>
<a id="a8c3b11e8f6bdd36ec82e5332c667ea7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c3b11e8f6bdd36ec82e5332c667ea7b">&#9670;&nbsp;</a></span>sighandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sighandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replacement SIGINT handler. </p>
<p>FUSE handles SIGINT internally, but because there are extra threads running while transcoding this mechanism does not properly work. We implement our own SIGINT handler to ensure proper shutdown of all threads. Next we restore the original handler and dispatch the signal to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">signum</td><td>- Signal to handle. Must be SIGINT. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l01238">1238</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="fuseops_8cc_source.html#l00082">oldHandler</a>, <a class="el" href="transcode_8cc_source.html#l00615">transcoder_exit()</a>, and <a class="el" href="logging_8h_source.html#l00225">Logging::warning()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l01259">ffmpegfs_init()</a>.</p>

</div>
</div>
<a id="acba2f69b5cad51dfdad024c9efccb684"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acba2f69b5cad51dfdad024c9efccb684">&#9670;&nbsp;</a></span>transcoded_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool transcoded_name </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classFFmpegfs__Format.html">FFmpegfs_Format</a> **&#160;</td>
          <td class="paramname"><em>current_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert file name from source to destination name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filepath</td><td>- Name of source file, will be changed to destination name. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">current_format</td><td>- If format has been found points to format info, nullptr if not. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if format has been found and filename changed, false if not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00338">338</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpeg__utils_8cc_source.html#l00214">FFmpegfs_Format::audio_codec_id()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00161">FFMPEGFS_PARAMS::current_format()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00290">find_ext()</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l01266">nocasecompare()</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, <a class="el" href="ffmpeg__utils_8cc_source.html#l00310">replace_ext()</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l00209">FFmpegfs_Format::video_codec_id()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00603">ffmpegfs_readdir()</a>, and <a class="el" href="fuseops_8cc_source.html#l00567">ffmpegfs_readlink()</a>.</p>

</div>
</div>
<a id="a66c48999dc2161a69398c5e44c777792"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66c48999dc2161a69398c5e44c777792">&#9670;&nbsp;</a></span>translate_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void translate_path </td>
          <td>(</td>
          <td class="paramtype">std::string *&#160;</td>
          <td class="paramname"><em>origpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate file names from FUSE to the original absolute path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">origpath</td><td>- Upon return, contains the name and path of the original file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>- Filename and relative path of the original file. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00325">325</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">References <a class="el" href="ffmpegfs_8h_source.html#l00118">FFMPEGFS_PARAMS::m_basepath</a>, <a class="el" href="ffmpegfs_8cc_source.html#l00074">params</a>, and <a class="el" href="ffmpeg__utils_8cc_source.html#l01238">sanitise_filepath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fuseops_8cc_source.html#l00876">ffmpegfs_fgetattr()</a>, <a class="el" href="fuseops_8cc_source.html#l00711">ffmpegfs_getattr()</a>, <a class="el" href="fuseops_8cc_source.html#l00980">ffmpegfs_open()</a>, <a class="el" href="fuseops_8cc_source.html#l01069">ffmpegfs_read()</a>, <a class="el" href="fuseops_8cc_source.html#l00603">ffmpegfs_readdir()</a>, <a class="el" href="fuseops_8cc_source.html#l00567">ffmpegfs_readlink()</a>, and <a class="el" href="fuseops_8cc_source.html#l01181">ffmpegfs_statfs()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a20127960d0a961494a0a56d119d885a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20127960d0a961494a0a56d119d885a9">&#9670;&nbsp;</a></span>ffmpegfs_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fuse_operations ffmpegfs_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FUSE file system operations. </p>
<p>Fuse operations struct. </p>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00084">84</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

<p class="reference">Referenced by <a class="el" href="ffmpegfs_8cc_source.html#l01253">main()</a>.</p>

</div>
</div>
<a id="a94e6179f1064980bec863d36c8afe89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94e6179f1064980bec863d36c8afe89c">&#9670;&nbsp;</a></span>passthrough_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::list&lt;std::string&gt; passthrough_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>List of passthrough file extension</p>
<p>Note: Must be in ascending aplhabetical order for the binary_search function used on it to work! New elements must be inserted in the correct position, elements removed by simply deleting them from the list. </p>

<p class="definition">Definition at line <a class="el" href="fuseops_8cc_source.html#l00095">95</a> of file <a class="el" href="fuseops_8cc_source.html">fuseops.cc</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
