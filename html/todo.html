<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FFmpegfs Fuse Multi Media Filesystem: Todo List</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FFmpegfs Fuse Multi Media Filesystem<span id="projectnumber">&#160;2.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Todo List </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="reflist">
<dt>Member <a class="el" href="classCache__Entry.html#a6b32137876a33aba00724cd594dd1fad">Cache_Entry::destroy</a>  ()</dt>
<dd><p class="startdd"><a class="anchor" id="_todo000004"></a>Implement delete later mechanism </p>
<p class="enddd"><a class="anchor" id="_todo000005"></a>Return true when deleted, false if kept for delete later  </p>
</dd>
<dt>Member <a class="el" href="blurayparser_8cc.html#a3629b60b55784a2b0be1d920d331946e">create_bluray_virtualfile</a>  (BLURAY *bd, const BLURAY_TITLE_INFO *ti, const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler, bool is_main_title, bool full_title, uint32_t title_idx, uint32_t chapter_idx)</dt>
<dd><a class="anchor" id="_todo000003"></a>We actually calculate the overall Blu-ray bitrate here, including all audio streams, not just the video bitrate. This should be the video bitrate alone. We should also calculate the audio bitrate for the selected stream.  </dd>
<dt>Member <a class="el" href="cuesheetparser_8cc.html#a053ed47b16b255c3f74d67b29887efe9">create_cuesheet_virtualfile</a>  (LPCVIRTUALFILE virtualfile, Track *track, int titleno, const std::string &amp;path, const struct stat *statbuf, int trackcount, int trackno, const std::string &amp;aperformer, const std::string &amp;album, const std::string &amp;genre, const std::string &amp;date, int64_t *remainingduration, LPVIRTUALFILE *lastfile)</dt>
<dd><a class="anchor" id="_todo000006"></a>probe original file for info  </dd>
<dt>Member <a class="el" href="dvdparser_8cc.html#a492e2e1960310e6b55fa7d7b83ecc931">create_dvd_virtualfile</a>  (const ifo_handle_t *vts_file, const std::string &amp;path, const struct stat *statbuf, void *buf, fuse_fill_dir_t filler, bool full_title, int title_idx, int chapter_idx, int angles, int ttnnum, int audio_stream, const <a class="el" href="structAUDIO__SETTINGS.html" title="Audio stream settings.">AUDIO_SETTINGS</a> &amp;audio_settings, const <a class="el" href="structVIDEO__SETTINGS.html" title="Video stream settings.">VIDEO_SETTINGS</a> &amp;video_settings)</dt>
<dd><a class="anchor" id="_todo000007"></a>We actually calculate the overall DVD bitrate here, including all audio streams, not just the video bitrate. This should be the video bitrate alone. We should also calculate the audio bitrate for the selected stream.  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a7f6903a86d5ed1ebee3258b981536f74">FFmpeg_Transcoder::add_albumart_stream</a>  (const AVCodecContext *input_codec_ctx)</dt>
<dd><a class="anchor" id="_todo000010"></a>Add support for album arts  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#afe22b3a4c7ad7fa2ca8219f5b76f2542">FFmpeg_Transcoder::add_stream</a>  (AVCodecID codec_id)</dt>
<dd><a class="anchor" id="_todo000009"></a>FFmpeg actually <em>can</em> transcode while presevering the SAR. FFmpegfs rescales to fix that problem. Need to find out what I am doing wrong here...  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a96c31a851e95a6fb714b2908c83ec696">FFmpeg_Transcoder::decode_frame</a>  (AVPacket *pkt)</dt>
<dd><a class="anchor" id="_todo000011"></a>Calling decode_video_frame until all data has been used, but for DVDs only. Can someone tell me why this seems required??? If this is not done some videos become garbled. But only for DVDs... <br  />
<br  />
With fix: all DVDs OK, some Blurays (e.g. Phil Collins) not... <br  />
With fix: all DVDs shitty, but Blurays OK. <br  />
<br  />
Applying fix for DVDs only.  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#ab7fc3ccbcad63d267dcc99a688348115">FFmpeg_Transcoder::flush_delayed_subtitles</a>  ()</dt>
<dd><a class="anchor" id="_todo000014"></a>Implement <a class="el" href="classFFmpeg__Transcoder.html#ab7fc3ccbcad63d267dcc99a688348115" title="Flush delayed subtitle packets, if there are any.">flush_delayed_subtitles()</a> if required  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#ab1c5d95c822b31beee2815e1ef0d0aed">FFmpeg_Transcoder::get_hw_decoder_name</a>  (AVCodecID codec_id, std::string *codec_name=nullptr) const</dt>
<dd><a class="anchor" id="_todo000017"></a><a class="el" href="structHWACCEL.html" title="Hardware acceleration device and type.">HWACCEL</a> - Supported formats </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a26f0c35e837afa3b58b39f4d0a165afe">FFmpeg_Transcoder::get_hw_mmal_decoder_name</a>  (AVCodecID codec_id, std::string *codec_name) const</dt>
<dd><p class="startdd"><a class="anchor" id="_todo000020"></a>mmal VC1 hardware acceleration not working. Probably because I have not bought a key... <br  />
<br  />
INFO : [/root/test/in/Test_1440x576_WVC1_6Mbps.wmv] Hardware decoder acceleration active using codec 'vc1_mmal'. <br  />
INFO : [/root/test/in/Test_1440x576_WVC1_6Mbps.wmv] Hardware decoder acceleration enabled. Codec 'vc1_mmal'. <br  />
mmal: mmal_vc_port_info_set: failed to set port info (2:0): EINVAL <br  />
mmal: mmal_vc_port_set_format: mmal_vc_port_info_set failed 0x6e54c560 (EINVAL) <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:in:0(WVC1)(0x6e54c560) is not enabled <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:out:0(0x6e546660) is not enabled <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:ctr:0(0x6e54c240) is not enabled <br  />
ERROR : [/root/test/in/Test_1440x576_WVC1_6Mbps.wmv] Failed to open video input codec for stream video (error '0'). <br  />
ERROR : [/root/test/in/Test_1440x576_WVC1_6Mbps.wmv] Failed to open video codec (error 'Unknown error occurred'). </p>
<p class="enddd"><a class="anchor" id="_todo000019"></a>mmal MPEG1 hardware acceleration not working. Probably because I have not bought a key... <br  />
<br  />
INFO : [/root/test/in/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).mpeg] Transcoding to ts. <br  />
INFO : [/root/test/in/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).mpeg] Hardware decoder acceleration active using codec 'mpeg2_mmal'. <br  />
INFO : [/root/test/in/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).mpeg] Hardware decoder acceleration enabled. Codec 'mpeg2_mmal'. <br  />
mmal: mmal_vc_port_info_set: failed to set port info (2:0): EINVAL <br  />
mmal: mmal_vc_port_set_format: mmal_vc_port_info_set failed 0x6b985440 (EINVAL) <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:in:0(MP2V)(0x6b985440) is not enabled <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:out:0(0x6b985890) is not enabled <br  />
mmal: mmal_port_disable: port vc.ril.video_decode:ctr:0(0x6b94db90) is not enabled <br  />
ERROR : [/root/test/in/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).mpeg] Failed to open video input codec for stream video (error '0'). <br  />
ERROR : [/root/test/in/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).mpeg] Failed to open video codec (error 'Unknown error occurred'). <br  />
ERROR : [/root/test/out/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).ts] Transcoding exited with error. <br  />
ERROR : [/root/test/out/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).ts] System error: (5) Input/output error <br  />
ERROR : [/root/test/out/En Vogue - Don-t Let Go (Love) (Official Music Video) (mpeg2).ts] FFMpeg error: (-1313558101) Unknown error occurred  </p>
</dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a10d35e42fd531b0f96da0ad9eb5ead89">FFmpeg_Transcoder::get_hw_vaapi_codec_name</a>  (AVCodecID codec_id, std::string *codec_name) const</dt>
<dd><a class="anchor" id="_todo000018"></a>fixit, MPEG-1 decoding does not work... </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#aac45e5ea83a42253119635023ce8d8e6">FFmpeg_Transcoder::open_output_frame_set</a>  (<a class="el" href="classBuffer.html" title="The Buffer class.">Buffer</a> *buffer)</dt>
<dd><a class="anchor" id="_todo000008"></a>Make frame image compression rate command line settable  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a47031e756634d90dc5e82eef8b38a618">FFmpeg_Transcoder::open_subtitles</a>  ()</dt>
<dd><a class="anchor" id="_todo000021"></a>Add text to bitmap conversion.  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#ae9493510e3944742d2027f0d2b459f0c">FFmpeg_Transcoder::produce_audio_dts</a>  (AVPacket *pkt)</dt>
<dd><a class="anchor" id="_todo000013"></a>Is this a FFmpeg bug or am I too stupid? <br  />
OPUS is a bit strange. Whatever we feed into the encoder, the result will always be floating point planar at 48 K sampling rate. <br  />
For some reason the duration calculated by the FFMpeg API is wrong. We have to rescale it to the correct value. Same applies to mpegts, so let's rescale.  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a6afa2189ecd068bcbaa1054835db27c4">FFmpeg_Transcoder::read_decode_convert_and_store</a>  (int *finished)</dt>
<dd><a class="anchor" id="_todo000012"></a>Cue sheet track: Must check video stream, too and end if both all video and audio packets arrived. Discard packets exceeding duration.  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#ad5fc4ed5d3550cf962f842bf4b8e3425">FFmpeg_Transcoder::start_new_segment</a>  ()</dt>
<dd><a class="anchor" id="_todo000015"></a>Set reasonable size here  </dd>
<dt>Member <a class="el" href="classFFmpeg__Transcoder.html#a03d1d37a915852aaa88a62331d729198">FFmpeg_Transcoder::video_size</a>  (size_t *filesize, AVCodecID codec_id, BITRATE bit_rate, int64_t duration, int width, int height, bool interleaved, const AVRational &amp;framerate)</dt>
<dd><a class="anchor" id="_todo000016"></a>AV1 prediction has not been tested yet  </dd>
<dt>Member <a class="el" href="fuseops_8cc.html#a823061cda8036c46d185b5edd62bf770">ffmpegfs_getattr</a>  (const char *path, struct stat *stbuf)</dt>
<dd><a class="anchor" id="_todo000024"></a>Calculate correct file size for frame image in set  </dd>
<dt>Member <a class="el" href="fuseops_8cc.html#a6c0c07bc6805650f5da69fc23258cc51">ffmpegfs_readdir</a>  (const char *path, void *buf, fuse_fill_dir_t filler, off_t, struct fuse_file_info *)</dt>
<dd><a class="anchor" id="_todo000023"></a>Calculate correct file size for frame image in set  </dd>
<dt>Member <a class="el" href="fuseops_8cc.html#a7ad0a9782c3231049be5c9c9b22542a7">find_original</a>  (std::string *filepath)</dt>
<dd><a class="anchor" id="_todo000025"></a>This probably won't work, need to redo "Fallback to old method"  </dd>
<dt>Member <a class="el" href="ffmpeg__utils_8cc.html#a2c52f6750d9830ac7fd4c31875b563a1">is_device</a>  (__attribute__((unused)) const AVClass *avclass)</dt>
<dd><a class="anchor" id="_todo000022"></a>Currently always returns 0. Must implement real check.  </dd>
<dt>Member <a class="el" href="fuseops_8cc.html#ac422769b0b726d7438d3e0f39eebf00f">kick_next</a>  (LPVIRTUALFILE virtualfile)</dt>
<dd><p class="startdd"><a class="anchor" id="_todo000026"></a>Will work only if transcoding finishes within timeout. Probably remove or raise timeout here. </p>
<p class="enddd"><a class="anchor" id="_todo000027"></a>Disable timeout  </p>
</dd>
<dt>Member <a class="el" href="blurayparser_8cc.html#a84935cc18021375ba2475fb7851435d5">parse_find_best_audio_stream</a>  ()</dt>
<dd><a class="anchor" id="_todo000001"></a>Returning 0 is not necessarily the best match. Probably better to parse. For "The life of Brian", e.g., this is the Hungarian audio track. No big deal, though, I can recite mostly all dialogs in English and German (and Latin :), but should be fixed anyway.  </dd>
<dt>Member <a class="el" href="blurayparser_8cc.html#aa1d91d3ccaa872502b7054e73ba33677">parse_find_best_video_stream</a>  ()</dt>
<dd><a class="anchor" id="_todo000002"></a>Returning 0 is not necessarily the best match. Probably better to parse. Most DVDs contain only one video track anyway, so this does not hurt at the moment.  </dd>
<dt>Member <a class="el" href="classVcdIO.html#a819639f2ee5edf791dc84cf01468dac9">VcdIO::duration</a>  () const override</dt>
<dd><a class="anchor" id="_todo000028"></a>Implement duration of video CD chapters </dd>
</dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
